<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', '{{ site.google_analytics }}');

    // Track blog post reads (when user scrolls to bottom)
    if (document.querySelector('.post-content')) {
        let hasTrackedRead = false;
        window.addEventListener('scroll', function () {
            if (!hasTrackedRead) {
                const scrollPercent = (window.scrollY + window.innerHeight) / document.documentElement.scrollHeight;
                if (scrollPercent > 0.8) {
                    hasTrackedRead = true;
                    gtag('event', 'blog_read', {
                        'event_category': 'engagement',
                        'event_label': document.title,
                        'page_path': window.location.pathname
                    });
                }
            }
        });
    }
</script>